<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Cancer Statistic</title>
  <meta name="description" content="Chapter 3 Data transformation | Cancer Statistic" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Cancer Statistic" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Cancer Statistic" />
  
  
  

<meta name="author" content="Yiquan Li, Chenxi Jiang, Zezhong Fan" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-8.1.2/highcharts.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-3d.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-more.js"></script>
<script src="libs/highcharts-8.1.2/modules/stock.js"></script>
<script src="libs/highcharts-8.1.2/modules/map.js"></script>
<script src="libs/highcharts-8.1.2/modules/annotations.js"></script>
<script src="libs/highcharts-8.1.2/modules/data.js"></script>
<script src="libs/highcharts-8.1.2/modules/drilldown.js"></script>
<script src="libs/highcharts-8.1.2/modules/item-series.js"></script>
<script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-8.1.2/modules/exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/export-data.js"></script>
<script src="libs/highcharts-8.1.2/modules/funnel.js"></script>
<script src="libs/highcharts-8.1.2/modules/heatmap.js"></script>
<script src="libs/highcharts-8.1.2/modules/treemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/sankey.js"></script>
<script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script>
<script src="libs/highcharts-8.1.2/modules/organization.js"></script>
<script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script>
<script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script>
<script src="libs/highcharts-8.1.2/modules/sunburst.js"></script>
<script src="libs/highcharts-8.1.2/modules/vector.js"></script>
<script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script>
<script src="libs/highcharts-8.1.2/modules/xrange.js"></script>
<script src="libs/highcharts-8.1.2/modules/tilemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/venn.js"></script>
<script src="libs/highcharts-8.1.2/modules/gantt.js"></script>
<script src="libs/highcharts-8.1.2/modules/timeline.js"></script>
<script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-8.1.2/modules/bullet.js"></script>
<script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script>
<script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script>
<script src="libs/highcharts-8.1.2/modules/lollipop.js"></script>
<script src="libs/highcharts-8.1.2/modules/series-label.js"></script>
<script src="libs/highcharts-8.1.2/plugins/motion.js"></script>
<script src="libs/highcharts-8.1.2/custom/reset.js"></script>
<script src="libs/highcharts-8.1.2/modules/boost.js"></script>
<script src="libs/highchart-binding-0.8.2/highchart.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Cancer Stat</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#the-effect-of-external-factors-on-cancer"><i class="fa fa-check"></i><b>2.1</b> The Effect of External Factors on Cancer</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#question-2"><i class="fa fa-check"></i><b>2.2</b> question 2</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#question-3"><i class="fa fa-check"></i><b>2.3</b> question 3</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#the-effect-of-external-factors-on-cancer-1"><i class="fa fa-check"></i><b>3.1</b> The Effect of External Factors on Cancer</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#question-2-1"><i class="fa fa-check"></i><b>3.2</b> question 2</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#question-3-1"><i class="fa fa-check"></i><b>3.3</b> question 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#the-effect-of-external-factors-on-cancer-2"><i class="fa fa-check"></i><b>4.1</b> The Effect of External Factors on Cancer</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#question-2-2"><i class="fa fa-check"></i><b>4.2</b> question 2</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#question-3-2"><i class="fa fa-check"></i><b>4.3</b> question 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#the-effect-of-external-factors-on-cancer-3"><i class="fa fa-check"></i><b>5.1</b> The Effect of External Factors on Cancer</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#share-of-cancer-deaths-attributed-to-risk-factors-from-1990-2019"><i class="fa fa-check"></i><b>5.1.1</b> Share of cancer deaths attributed to risk factors from 1990-2019</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#risk-distribution-over-different-types-of-cancer-1990-2019"><i class="fa fa-check"></i><b>5.1.2</b> Risk distribution over different types of cancer (1990, 2019)</a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#death-number-and-rate-by-risks-over-the-30-years-1990-2019"><i class="fa fa-check"></i><b>5.1.3</b> Death Number and Rate by Risks over the 30 years (1990-2019)</a></li>
<li class="chapter" data-level="5.1.4" data-path="results.html"><a href="results.html#death-rate-by-sex-and-age-for-different-risks"><i class="fa fa-check"></i><b>5.1.4</b> Death Rate by Sex and Age for Different Risks</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#question-2-3"><i class="fa fa-check"></i><b>5.2</b> question 2</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#is-the-world-making-progress-against-cancers"><i class="fa fa-check"></i><b>5.3</b> Is the World Making Progress against Cancers?</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#age-standardized-cancer-death-rates"><i class="fa fa-check"></i><b>5.3.1</b> Age-standardized cancer death rates</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#the-number-of-cancer-deaths-is-increasing"><i class="fa fa-check"></i><b>5.3.2</b> The number of cancer deaths is increasing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#lessons"><i class="fa fa-check"></i><b>7.1</b> Lessons</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#limitations"><i class="fa fa-check"></i><b>7.2</b> Limitations</a></li>
<li class="chapter" data-level="7.3" data-path="conclusion.html"><a href="conclusion.html#further-direction"><i class="fa fa-check"></i><b>7.3</b> Further Direction</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cancer Statistic</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p>All of our datasets generated from GBD results tool need to be pre-processed as they are not in a tidy format originally. Please go to our <a href="https://github.com/Maggieli99/Cancerstatistic/blob/main/03-cleaning.Rmd">github repo chapter</a> to see code in detail.</p>
<div id="the-effect-of-external-factors-on-cancer-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> The Effect of External Factors on Cancer</h2>
<p>For the risk data, we first removed the used columns “location”, “upper” and “lower”. And then we pivoted our dataset so that the combinations of <em>measure</em> and <em>metric</em> became new columns (variables) in the wider tidy data and values in <em>val</em> were placed in the corresponding entries. We also updated the columns names of our new data frame so that these names are more precise. Finally, noticed that all of our columns of character type have limited number of categories, we transformed all character columns into factors.</p>
<p>After data cleaning and transformation, our <em>cancer_risk</em> data frame has much less rows and contains only meaningful variables.</p>
<pre><code>## tibble [36,000 × 14] (S3: tbl_df/tbl/data.frame)
##  $ sex           : Factor w/ 3 levels &quot;Both&quot;,&quot;Female&quot;,..: 3 2 1 3 2 1 3 2 1 3 ...
##  $ age           : Factor w/ 4 levels &quot;0 to 14&quot;,&quot;15-49 years&quot;,..: 2 2 2 1 1 1 3 3 3 4 ...
##  $ cause         : Factor w/ 23 levels &quot;Bladder cancer&quot;,..: 22 22 22 22 22 22 22 22 22 22 ...
##  $ risk          : Factor w/ 14 levels &quot;Air pollution&quot;,..: 6 6 6 6 6 6 6 6 6 6 ...
##  $ year          : Factor w/ 30 levels &quot;1990&quot;,&quot;1991&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Deaths_Number : num [1:36000] 21570.35 8355.76 29926.1 5.43 3.64 ...
##  $ Deaths_Percent: num [1:36000] 0.3296 0.3193 0.3267 0.0413 0.0412 ...
##  $ Deaths_Rate   : num [1:36000] 1.569562 0.624541 1.103391 0.000603 0.000427 ...
##  $ YLDs_Number   : num [1:36000] 6382.45 2559.43 8941.88 1.89 1.28 ...
##  $ YLDs_Percent  : num [1:36000] 0.3198 0.3036 0.3151 0.0415 0.0413 ...
##  $ YLDs_Rate     : num [1:36000] 0.464418 0.191301 0.329692 0.00021 0.000151 ...
##  $ YLLs_Number   : num [1:36000] 992117 393046 1385162 415 278 ...
##  $ YLLs_Percent  : num [1:36000] 0.3265 0.3162 0.3236 0.0413 0.0412 ...
##  $ YLLs_Rate     : num [1:36000] 72.1911 29.3777 51.0716 0.0461 0.0326 ...</code></pre>
</div>
<div id="question-2-1" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> question 2</h2>
<p>The orginal dataset of countries contains more than 2000 rows of basic information of each countries so here we pick important factors towards to death of rate including GDP, GNI, health cost per capita and health cost percent of total GDP. Besides, we also spread the measure of cancer death including perceent, rate and number. Here, we also add a year column. The updated dataset are shown below and is tidy meanwhile.</p>
<pre><code>##                    location      1990      1995      2000      2005      2010
## 1                 Argentina 169.66998 173.89818 182.14473 181.11481 180.07339
## 2                 Australia 184.18313 192.67594 193.31104 194.89610 200.85215
## 3                    Brazil  78.84114  84.61197  93.10128  99.67651 107.69016
## 4                    Canada 195.97223 202.87002 207.70482 216.62647 224.16506
## 5                     China 123.10924 129.65109 143.38874 157.98039 165.80236
## 6                     Egypt  42.28493  43.41357  45.07314  50.71015  55.00599
## 7                   Finland 204.55687 204.86366 207.65370 216.96430 231.69883
## 8                   Germany 251.23656 258.51117 293.54060 315.30208 313.89857
## 9                     India  43.93490  44.97529  48.30335  48.67306  53.21531
## 10                     Iran  45.43738  47.56482  48.22970  53.00382  60.90063
## 11                    Japan 191.88792 222.85019 248.56124 275.92031 300.45230
## 12                    Kenya  29.66159  30.22206  32.05767  37.00788  42.08536
## 13                   Mexico  54.75466  57.70745  59.71625  64.21280  68.56254
## 14                 Mongolia 135.52334 141.84656 139.73559 143.46983 155.39782
## 15             South Africa  74.97670  85.03940 100.88880  95.07385  98.49860
## 16                    Sudan  41.45019  39.91298  37.93034  38.85716  38.96354
## 17           United Kingdom 293.04736 287.61260 276.03423 268.08075 265.36802
## 18 United States of America 210.40032 215.59387 212.15605 206.38309 207.00675
## 19                   Zambia  58.24265  60.45305  58.15159  54.55562  52.96815
##         2015      2019
## 1  179.18941 187.67255
## 2  204.96977 215.01927
## 3  115.01474 122.12533
## 4  233.62033 251.73958
## 5  172.88056 190.66293
## 6   57.00690  58.35333
## 7  245.50704 259.06847
## 8  309.62233 318.58737
## 9   60.33334  66.84045
## 10  72.98775  79.10019
## 11 322.00479 342.55495
## 12  43.31543  46.23899
## 13  75.59125  84.51311
## 14 158.44519 175.87471
## 15 102.69041  98.17437
## 16  40.41480  41.82419
## 17 276.13708 288.18833
## 18 215.53714 232.68162
## 19  51.81430  53.55679</code></pre>
</div>
<div id="question-3-1" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> question 3</h2>
<p>For the making_progress data, we need to do the similar step with risk data, that is, we first removed the used columns “location”, “upper” and “lower”,“sex”, since what we need to show is a global trend for both female and male. And then we pivoted our dataset so that the combinations of <em>measure</em> and <em>metric</em> became new columns (variables) in the wider tidy data and values in <em>val</em> were placed in the corresponding entries. To be more precise and clear, we need to change the column name for the metric.</p>
<pre><code>## tibble [840 × 8] (S3: tbl_df/tbl/data.frame)
##  $ age         : chr [1:840] &quot;Age-standardized&quot; &quot;Age-standardized&quot; &quot;Age-standardized&quot; &quot;Age-standardized&quot; ...
##  $ cause       : chr [1:840] &quot;Esophageal cancer&quot; &quot;Stomach cancer&quot; &quot;Liver cancer&quot; &quot;Larynx cancer&quot; ...
##  $ year        : num [1:840] 1990 1990 1990 1990 1990 1990 1990 1990 1990 1990 ...
##  $ DALYs_Rate  : num [1:840] 199 493 258 59 658 ...
##  $ Deaths_Rate : num [1:840] 8.18 20.48 8.93 2.19 27.3 ...
##  $ YLLs_Rate   : num [1:840] 197.2 487.9 256.4 57.4 651.4 ...
##  $ YLDs_Percent: num [1:840] 0.000191 0.000499 0.000181 0.000145 0.000594 ...
##  $ YLDs_Rate   : num [1:840] 2.12 5.52 2 1.61 6.56 ...</code></pre>
<pre><code>## tibble [840 × 4] (S3: tbl_df/tbl/data.frame)
##  $ age          : chr [1:840] &quot;All Ages&quot; &quot;All Ages&quot; &quot;All Ages&quot; &quot;All Ages&quot; ...
##  $ cause        : chr [1:840] &quot;Esophageal cancer&quot; &quot;Stomach cancer&quot; &quot;Liver cancer&quot; &quot;Leukemia&quot; ...
##  $ year         : num [1:840] 1990 1990 1990 1990 1990 1990 1990 1990 1990 1990 ...
##  $ Deaths_Number: num [1:840] 319332 788317 365215 263263 7224 ...</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Maggieli99/Cancerstatistic/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Maggieli99/Cancerstatistic/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
