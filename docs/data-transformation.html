<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Cancer Statistic</title>
  <meta name="description" content="Chapter 3 Data transformation | Cancer Statistic" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Cancer Statistic" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Cancer Statistic" />
  
  
  

<meta name="author" content="Yiquan Li, Chenxi Jiang, Zezhong Fan" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-8.1.2/highcharts.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-3d.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-more.js"></script>
<script src="libs/highcharts-8.1.2/modules/stock.js"></script>
<script src="libs/highcharts-8.1.2/modules/map.js"></script>
<script src="libs/highcharts-8.1.2/modules/annotations.js"></script>
<script src="libs/highcharts-8.1.2/modules/data.js"></script>
<script src="libs/highcharts-8.1.2/modules/drilldown.js"></script>
<script src="libs/highcharts-8.1.2/modules/item-series.js"></script>
<script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-8.1.2/modules/exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/export-data.js"></script>
<script src="libs/highcharts-8.1.2/modules/funnel.js"></script>
<script src="libs/highcharts-8.1.2/modules/heatmap.js"></script>
<script src="libs/highcharts-8.1.2/modules/treemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/sankey.js"></script>
<script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script>
<script src="libs/highcharts-8.1.2/modules/organization.js"></script>
<script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script>
<script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script>
<script src="libs/highcharts-8.1.2/modules/sunburst.js"></script>
<script src="libs/highcharts-8.1.2/modules/vector.js"></script>
<script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script>
<script src="libs/highcharts-8.1.2/modules/xrange.js"></script>
<script src="libs/highcharts-8.1.2/modules/tilemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/venn.js"></script>
<script src="libs/highcharts-8.1.2/modules/gantt.js"></script>
<script src="libs/highcharts-8.1.2/modules/timeline.js"></script>
<script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-8.1.2/modules/bullet.js"></script>
<script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script>
<script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script>
<script src="libs/highcharts-8.1.2/modules/lollipop.js"></script>
<script src="libs/highcharts-8.1.2/modules/series-label.js"></script>
<script src="libs/highcharts-8.1.2/plugins/motion.js"></script>
<script src="libs/highcharts-8.1.2/custom/reset.js"></script>
<script src="libs/highcharts-8.1.2/modules/boost.js"></script>
<script src="libs/highchart-binding-0.8.2/highchart.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Cancer Stat</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#data-on-cancer-by-risk"><i class="fa fa-check"></i><b>2.1</b> Data on Cancer by Risk</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#data-on-cancer-by-country-development"><i class="fa fa-check"></i><b>2.2</b> Data on Cancer by Country Development</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#data-on-cancer-over-time"><i class="fa fa-check"></i><b>2.3</b> Data on Cancer over Time</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#cancer-risk-data-transformation"><i class="fa fa-check"></i><b>3.1</b> Cancer Risk Data Transformation</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#cancer-by-country-data-transformation"><i class="fa fa-check"></i><b>3.2</b> Cancer by Country Data Transformation</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#cancer-time-series-data-transformation"><i class="fa fa-check"></i><b>3.3</b> Cancer Time Series Data Transformation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#cancer-risk-dataset"><i class="fa fa-check"></i><b>4.1</b> Cancer Risk Dataset</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#cancer-by-country-dataset"><i class="fa fa-check"></i><b>4.2</b> Cancer by Country Dataset</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#the-effect-of-external-factors-on-cancer"><i class="fa fa-check"></i><b>5.1</b> The Effect of External Factors on Cancer</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#share-of-cancer-deaths-attributed-to-risk-factors-from-1990-2019"><i class="fa fa-check"></i><b>5.1.1</b> Share of cancer deaths attributed to risk factors from 1990-2019</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#risk-distribution-over-different-types-of-cancer-1990-2019"><i class="fa fa-check"></i><b>5.1.2</b> Risk distribution over different types of cancer (1990, 2019)</a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#death-number-and-rate-by-risks-over-the-30-years-1990-2019"><i class="fa fa-check"></i><b>5.1.3</b> Death Number and Rate by Risks over the 30 years (1990-2019)</a></li>
<li class="chapter" data-level="5.1.4" data-path="results.html"><a href="results.html#death-rate-by-sex-and-age-for-different-risks"><i class="fa fa-check"></i><b>5.1.4</b> Death Rate by Sex and Age for Different Risks</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#relationship-between-cancer-deaths-and-country-development"><i class="fa fa-check"></i><b>5.2</b> Relationship between Cancer Deaths and Country Development</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#heatmap-of-death-rate-in-world"><i class="fa fa-check"></i><b>5.2.1</b> Heatmap of Death Rate in World</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#bubble-plot-of-death-rate-vs-health-cost-of-gdp"><i class="fa fa-check"></i><b>5.2.2</b> Bubble Plot of Death Rate vs Health Cost of GDP</a></li>
<li class="chapter" data-level="5.2.3" data-path="results.html"><a href="results.html#accumulated-death-among-countries"><i class="fa fa-check"></i><b>5.2.3</b> Accumulated Death Among Countries</a></li>
<li class="chapter" data-level="5.2.4" data-path="results.html"><a href="results.html#death-rate-by-gdp"><i class="fa fa-check"></i><b>5.2.4</b> Death Rate by GDP</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#is-the-world-making-progress-against-cancers"><i class="fa fa-check"></i><b>5.3</b> Is the World Making Progress against Cancers?</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#age-standardized-cancer-death-rates"><i class="fa fa-check"></i><b>5.3.1</b> Age-standardized cancer death rates</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#the-number-of-cancer-deaths-is-increasing-for-all-age"><i class="fa fa-check"></i><b>5.3.2</b> The number of cancer deaths is increasing for all age</a></li>
<li class="chapter" data-level="5.3.3" data-path="results.html"><a href="results.html#year-of-life-lost-rate-is-decreasing."><i class="fa fa-check"></i><b>5.3.3</b> Year of life lost rate is decreasing.</a></li>
<li class="chapter" data-level="5.3.4" data-path="results.html"><a href="results.html#the-tend-of-rate-of-years-for-who-is-living-with-disability-is-flat-or-increase-a-little."><i class="fa fa-check"></i><b>5.3.4</b> The tend of rate of years for who is living with disability is flat or increase a little.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#lessons"><i class="fa fa-check"></i><b>7.1</b> Lessons</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#limitations"><i class="fa fa-check"></i><b>7.2</b> Limitations</a></li>
<li class="chapter" data-level="7.3" data-path="conclusion.html"><a href="conclusion.html#further-direction"><i class="fa fa-check"></i><b>7.3</b> Further Direction</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cancer Statistic</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p>All of our datasets generated from GBD results tool need to be pre-processed as they are not in a tidy format originally. Please go to our <a href="https://github.com/Maggieli99/Cancerstatistic/blob/main/03-cleaning.Rmd">github repo chapter</a> to see code in detail.</p>
<div id="cancer-risk-data-transformation" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Cancer Risk Data Transformation</h2>
<p>For the risk data, we first removed the used columns “location”, “upper” and “lower”. And then we pivoted our dataset so that the combinations of <em>measure</em> and <em>metric</em> became new columns (variables) in the wider tidy data and values in <em>val</em> were placed in the corresponding entries. We also updated the columns names of our new data frame so that these names are more precise. Finally, noticed that all of our columns of character type have limited number of categories, we transformed all character columns into factors.</p>
<p>After data cleaning and transformation, our <em>cancer_risk</em> data frame has much less rows and contains only meaningful variables.</p>
<pre><code>## tibble [36,000 × 14] (S3: tbl_df/tbl/data.frame)
##  $ sex           : Factor w/ 3 levels &quot;Both&quot;,&quot;Female&quot;,..: 3 2 1 3 2 1 3 2 1 3 ...
##  $ age           : Factor w/ 4 levels &quot;0 to 14&quot;,&quot;15-49 years&quot;,..: 2 2 2 1 1 1 3 3 3 4 ...
##  $ cause         : Factor w/ 23 levels &quot;Bladder cancer&quot;,..: 22 22 22 22 22 22 22 22 22 22 ...
##  $ risk          : Factor w/ 14 levels &quot;Air pollution&quot;,..: 6 6 6 6 6 6 6 6 6 6 ...
##  $ year          : Factor w/ 30 levels &quot;1990&quot;,&quot;1991&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Deaths_Number : num [1:36000] 21570.35 8355.76 29926.1 5.43 3.64 ...
##  $ Deaths_Percent: num [1:36000] 0.3296 0.3193 0.3267 0.0413 0.0412 ...
##  $ Deaths_Rate   : num [1:36000] 1.569562 0.624541 1.103391 0.000603 0.000427 ...
##  $ YLDs_Number   : num [1:36000] 6382.45 2559.43 8941.88 1.89 1.28 ...
##  $ YLDs_Percent  : num [1:36000] 0.3198 0.3036 0.3151 0.0415 0.0413 ...
##  $ YLDs_Rate     : num [1:36000] 0.464418 0.191301 0.329692 0.00021 0.000151 ...
##  $ YLLs_Number   : num [1:36000] 992117 393046 1385162 415 278 ...
##  $ YLLs_Percent  : num [1:36000] 0.3265 0.3162 0.3236 0.0413 0.0412 ...
##  $ YLLs_Rate     : num [1:36000] 72.1911 29.3777 51.0716 0.0461 0.0326 ...</code></pre>
</div>
<div id="cancer-by-country-data-transformation" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Cancer by Country Data Transformation</h2>
<p>The original dataset of countries contains more than 2000 rows of basic information of each countries so here we pick important factors towards to death rate including GDP, GNI, health cost per capita and health cost percent of total GDP. Besides, we also spread the measure of cancer death including percent, rate and number. Here, we also add a year column. The updated dataset are summarized below and is tidy meanwhile.</p>
<pre><code>## &#39;data.frame&#39;:    133 obs. of  9 variables:
##  $ location          : Factor w/ 19 levels &quot;Argentina&quot;,&quot;Australia&quot;,..: 11 1 5 14 15 4 12 3 6 13 ...
##  $ year              : chr  &quot;1990&quot; &quot;1990&quot; &quot;1990&quot; &quot;1990&quot; ...
##  $ Health_Cost_of_GDP: num  NA NA NA NA NA NA NA NA NA NA ...
##  $ Health_Cost       : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ GDP               : num  19571 7191 982 3344 6417 ...
##  $ GNI               : num  2.44e+12 2.24e+11 1.12e+12 7.18e+09 2.27e+11 ...
##  $ Number            : num  241523 56196 1457222 2919 27614 ...
##  $ Percent           : num  0.298 0.223 0.174 0.141 0.094 ...
##  $ Rate              : num  192 170 123 136 75 ...</code></pre>
</div>
<div id="cancer-time-series-data-transformation" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Cancer Time Series Data Transformation</h2>
<p>For the making_progress data, we need to do the similar step with risk data, that is, we first removed the used columns “location”, “upper” and “lower”,“sex”, since what we need to show is a global trend for both female and male. And then we pivoted our dataset so that the combinations of <em>measure</em> and <em>metric</em> became new columns (variables) in the wider tidy data and values in <em>val</em> were placed in the corresponding entries. To be more precise and clear, we need to change the column name for the metric.</p>
<pre><code>## tibble [840 × 8] (S3: tbl_df/tbl/data.frame)
##  $ age         : chr [1:840] &quot;Age-standardized&quot; &quot;Age-standardized&quot; &quot;Age-standardized&quot; &quot;Age-standardized&quot; ...
##  $ cause       : chr [1:840] &quot;Esophageal cancer&quot; &quot;Stomach cancer&quot; &quot;Liver cancer&quot; &quot;Larynx cancer&quot; ...
##  $ year        : num [1:840] 1990 1990 1990 1990 1990 1990 1990 1990 1990 1990 ...
##  $ DALYs_Rate  : num [1:840] 199 493 258 59 658 ...
##  $ Deaths_Rate : num [1:840] 8.18 20.48 8.93 2.19 27.3 ...
##  $ YLLs_Rate   : num [1:840] 197.2 487.9 256.4 57.4 651.4 ...
##  $ YLDs_Percent: num [1:840] 0.000191 0.000499 0.000181 0.000145 0.000594 ...
##  $ YLDs_Rate   : num [1:840] 2.12 5.52 2 1.61 6.56 ...</code></pre>
<pre><code>## tibble [840 × 4] (S3: tbl_df/tbl/data.frame)
##  $ age          : chr [1:840] &quot;All Ages&quot; &quot;All Ages&quot; &quot;All Ages&quot; &quot;All Ages&quot; ...
##  $ cause        : chr [1:840] &quot;Esophageal cancer&quot; &quot;Stomach cancer&quot; &quot;Liver cancer&quot; &quot;Leukemia&quot; ...
##  $ year         : num [1:840] 1990 1990 1990 1990 1990 1990 1990 1990 1990 1990 ...
##  $ Deaths_Number: num [1:840] 319332 788317 365215 263263 7224 ...</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Maggieli99/Cancerstatistic/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Maggieli99/Cancerstatistic/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
